html 
    head
        title= "Site / " + task.name
    body
        if (session.lightmode)
            include ../includes/csslight.pug
        else 
            include ../includes/cssdark.pug

        if (session == undefined || session.loggedin == undefined || !session.loggedin)
            include ../includes/loggedout.pug
        else
            p(style="font-weight: bold")= "User: " + session.username
            include ../includes/loggedin.pug

        br
        
        div#main
            hr
            h1#taskname= task.name
            
            h3
                span= "Assigned to: " + task.username
                span= " / Due on "
                span#taskdate= task.datetime
            hr
        
            h4 Edit Task:
            label(for='etaskname')= 'Task Name:'
            input#etaskname(type='text' name='etaskname' value=task.name)
            label(for='etaskdate')= 'Task Date:'
            input#etaskdate(type='datetime-local' name='etaskdate' value=task.datetime)
            button#edittask(type='button')='Submit'

            h4 Add Comment:
            textarea#comment(style='margin-left: 7px' rows='5' cols='68')
            button#addcomment(type='button')='Add'
            
            h4 Create Sub Task:
            label(for='subtaskname')= 'Sub Task Name:'
            input#createsubtaskname(type='text' name='subtaskname')
            label(for='subtaskdate')= 'Sub Task Date:'
            input#createsubtaskdate(type='datetime-local' name='subtaskdate')
            button#createsubtask(type='button')='Create'

            hr

            if (task.comments)
                h4 Comments: 
                ul
                    for c in task.comments
                        p='- ' + c
            
            h4 Sub Tasks:
            if (task.subtasks)
                ul
                    for s in task.subtasks
                        input(type="checkbox")
                        span= ' ' + s.name + ' / Due on ' + s.datetime
        
        script(src='../clients/createsubtask.js')
